!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.Input={},e.React)}(this,function(e,i){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function s(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}}(),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},p=function(e){function r(e){n(this,r);var t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={isValid:!0,showErrors:!1},t}return a(r,e),o(r,[{key:"componentWillReceiveProps",value:function(e){e.value===this.props.value&&e.disabled===this.props.disabled&&e.required===this.props.required||(this.props.validate(this,e),this.setState({showErrors:!1}))}},{key:"componentWillMount",value:function(){this.props.registerInput(this)}},{key:"componentWillUnmount",value:function(){this.props.unregisterInput(this)}},{key:"setValue",value:function(e){var t=e.target.name,r=e.target.value;this.props.onFormChange({name:t,value:r}),this.props.onChange&&this.props.onChange(e)}},{key:"onBlur",value:function(){this.setState({showErrors:!0})}},{key:"render",value:function(){var e=this.state.showErrors&&!this.state.isValid,t=e&&this.props.invalidHint,r=[this.props.hint,t&&this.props.hint&&i.createElement("br",null),t];return i.createElement(m,{isError:e},this.props.label&&i.createElement(c,{name:this.props.label,className:this.props.labelClass,required:this.props.required}),i.createElement("div",{className:this.props.divClass},i.createElement("input",{className:"form-control"+(this.props.inputClass?" "+this.props.inputClass:""),type:this.type,name:this.props.name,value:this.props.value,onChange:this.setValue.bind(this),disabled:this.props.disabled,onBlur:this.onBlur.bind(this),placeholder:this.props.placeholder}),i.createElement(d,{text:r})))}}]),r}(i.Component),t=function(e){function r(e){n(this,r);var t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type=t.props.type||"text",t}return a(r,p),r}(),r=function(e){function r(e){n(this,r);var t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="password",t}return a(r,p),r}(),u=function(e){function t(e){return n(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,p),o(t,[{key:"setChecked",value:function(e){var t=e.target.name,r=e.target.checked;this.props.onFormChange({name:t,value:r}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this.state.showErrors&&!this.state.isValid,t=e&&this.props.invalidHint,r=[this.props.hint,t&&this.props.hint&&i.createElement("br",null),t];return i.createElement(m,{isError:e},i.createElement("div",{className:this.props.divClass},i.createElement("div",{className:"checkbox"},i.createElement("label",null,i.createElement("input",{className:this.props.inputClass,name:this.props.name,type:"checkbox",checked:this.props.value,onChange:this.setChecked.bind(this),onBlur:this.onBlur.bind(this),disabled:this.props.disabled}),i.createElement("span",null,this.props.label))),i.createElement(d,{text:r})))}}]),t}(),h=function(e){function t(e){return n(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,p),o(t,[{key:"render",value:function(){var e=this.state.showErrors&&!this.state.isValid,t=e&&this.props.invalidHint,r=this.props.hint||t,s=[this.props.hint,t&&this.props.hint&&i.createElement("br",null),t];return i.createElement(m,{isError:e},this.props.label&&i.createElement(c,{name:this.props.label,className:this.props.labelClass,required:this.props.required}),i.createElement("div",{className:this.props.divClass},i.createElement("select",{className:"form-control"+(this.props.inputClass?" "+this.props.inputClass:""),name:this.props.name,disabled:this.props.disabled,value:this.props.value,onBlur:this.onBlur.bind(this),onChange:this.setValue.bind(this)},this.props.children),r&&i.createElement(d,{text:s})))}}]),t}(),c=function(e){return i.createElement("label",{className:"control-label"+(e.className?" "+e.className:"")},e.name,e.required?i.createElement("span",{className:"required-form-field"}," *"):void 0)},d=function(e){return i.createElement("div",{className:"help-block"},e.text)},m=function(e){return i.createElement("div",{className:"form-group"+(e.isError?" has-error":"")},e.children)},f=function(e){function r(e){n(this,r);var t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={model:e.model,isValid:!0},t}return a(r,e),o(r,[{key:"componentWillMount",value:function(){this.inputs={}}},{key:"componentWillReceiveProps",value:function(e){this.setState({model:e.model})}},{key:"registerInput",value:function(e){if(e.props&&e.props.name){this.inputs[e.props.name]=e;var t=this.state.model;t[e.props.name]=e.props.value,this.setState({model:t}),this.validate(e)}}},{key:"unregisterInput",value:function(e){if(e.props&&e.props.name){delete this.inputs[e.props.name];var t=this.state.model;delete t[e.props.name],this.setState({model:t})}}},{key:"renderChildren",value:function(e){var t=this;if("object"!==(void 0===e?"undefined":s(e))||null==e)return e;var r=i.Children.count(e);return 1<r?i.Children.map(e,function(e){return t.renderChild(e)}):1===r?this.renderChild(Array.isArray(e)?e[0]:e):void 0}},{key:"renderChild",value:function(e){if("object"!==(void 0===e?"undefined":s(e))||null===e)return e;if(e.type&&null!==e.type.prototype&&e.type.prototype instanceof p){var t=e.props&&e.props.name;if(!t)throw new Error('Can not add input without "name" attribute');var r={registerInput:this.registerInput.bind(this),unregisterInput:this.unregisterInput.bind(this),validate:this.validate.bind(this),onFormChange:this.onFieldChange.bind(this),invalidHint:e.props.invalidHint||e.props.required&&e.props.label+" is required."};return r.value=this.state.model[t]||"",i.cloneElement(e,r)}return i.cloneElement(e,{},this.renderChildren(e.props&&e.props.children))}},{key:"validate",value:function(t,e){var r=this,s=e||t.props,i=s.name,n=[],o=!0;if(!s.disabled&&(this.state.model[i]||s.required))if(s.required&&!this.state.model[i])o=!1;else if(s.validators){(Array.isArray(s.validators)?s.validators:[s.validators]).forEach(function(e){n.push(Promise.resolve(e(""+(r.state.model[i]||""))))})}Promise.all(n).then(function(e){e.forEach(function(e){return o&=e}),t.setState({isValid:o},r.validateForm.bind(r))})}},{key:"validateForm",value:function(){var t=!0,r=this.inputs;Object.keys(r).forEach(function(e){r[e].state.isValid||(t=!1)}),this.setState({isValid:t}),this.props.onValidate&&this.props.onValidate(t)}},{key:"onFieldChange",value:function(e){var t=this.state.model;t[e.name]=e.value,this.setState({model:t}),this.props.onChange&&this.props.onChange(this.state.model,this.state.isValid)}},{key:"submit",value:function(e){e.preventDefault(),this.state.isValid&&this.props.onSubmit?this.props.onSubmit(this.state.model,e):this.props.onSubmitInvalid&&this.props.onSubmitInvalid(this.state.model,e)}},{key:"render",value:function(){return i.createElement("form",{onSubmit:this.submit.bind(this),className:this.props.className},i.createElement("div",{className:this.props.divClass},this.renderChildren(this.props.children)))}}]),r}(i.Component),v={Text:t,Password:r,Check:u,Select:h,Label:c,FormGroup:m,Form:f};e.default=v,e.Text=t,e.Password=r,e.Check=u,e.Select=h,e.Label=c,e.FormGroup=m,e.Form=f,Object.defineProperty(e,"__esModule",{value:!0})});
